<!doctype html>
<html lang="en" class="no-focus">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

    <title>Codebase - Bootstrap 4 Admin Template &amp; UI Framework</title>

    <meta name="description" content="Codebase - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
    <meta name="author" content="pixelcave">
    <meta name="robots" content="noindex, nofollow">

    <!-- Open Graph Meta -->
    <meta property="og:title" content="Codebase - Bootstrap 4 Admin Template &amp; UI Framework">
    <meta property="og:site_name" content="Codebase">
    <meta property="og:description" content="Codebase - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:image" content="">

    <!-- Icons -->
    <!-- The following icons can be replaced with your own, they are used by desktop and mobile browsers -->
    
    
    
    <!-- END Icons -->

    <!-- Stylesheets -->

    <!-- Fonts and Codebase framework -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:300,400,400i,600,700">
    <%= stylesheet_link_tag "codebase.min.css" %>

    <!-- You can include a specific file from css/themes/ folder to alter the default color theme of the template. eg: -->
    <!-- <link rel="stylesheet" id="css-theme" href="assets/css/themes/flat.min.css"> -->
    <!-- END Stylesheets -->
</head>

<body>

    <!-- Page Container -->
    <!--
            Available classes for #page-container:

        GENERIC

            'enable-cookies'                            Remembers active color theme between pages (when set through color theme helper Template._uiHandleTheme())

        SIDEBAR & SIDE OVERLAY

            'sidebar-r'                                 Right Sidebar and left Side Overlay (default is left Sidebar and right Side Overlay)
            'sidebar-mini'                              Mini hoverable Sidebar (screen width > 991px)
            'sidebar-o'                                 Visible Sidebar by default (screen width > 991px)
            'sidebar-o-xs'                              Visible Sidebar by default (screen width < 992px)
            'sidebar-inverse'                           Dark themed sidebar

            'side-overlay-hover'                        Hoverable Side Overlay (screen width > 991px)
            'side-overlay-o'                            Visible Side Overlay by default

            'enable-page-overlay'                       Enables a visible clickable Page Overlay (closes Side Overlay on click) when Side Overlay opens

            'side-scroll'                               Enables custom scrolling on Sidebar and Side Overlay instead of native scrolling (screen width > 991px)

        HEADER

            ''                                          Static Header if no class is added
            'page-header-fixed'                         Fixed Header

        HEADER STYLE

            ''                                          Classic Header style if no class is added
            'page-header-modern'                        Modern Header style
            'page-header-inverse'                       Dark themed Header (works only with classic Header style)
            'page-header-glass'                         Light themed Header with transparency by default
                                                        (absolute position, perfect for light images underneath - solid light background on scroll if the Header is also set as fixed)
            'page-header-glass page-header-inverse'     Dark themed Header with transparency by default
                                                        (absolute position, perfect for dark images underneath - solid dark background on scroll if the Header is also set as fixed)

        MAIN CONTENT LAYOUT

            ''                                          Full width Main Content if no class is added
            'main-content-boxed'                        Full width Main Content with a specific maximum width (screen width > 1200px)
            'main-content-narrow'                       Full width Main Content with a percentage width (screen width > 1200px)
        -->
    <div id="page-container" class="sidebar-mini sidebar-o sidebar-inverse enable-page-overlay side-scroll page-header-fixed page-header-glass page-header-inverse main-content-boxed">
        <!-- Header -->
        <header id="page-header">
            <% if current_user != true_user %>
            <div style="
    margin-bottom: 35p;
    height: 35px;
    background: #3f9ce8;
    color: white;
    text-align: center;
    padding: 8px;
">
                You (<%= true_user.first_name %>) are signed in as
                <%= current_user.first_name %>
                <%= link_to "Back to admin", stop_impersonating_users_path, method: :post, class: 'back-to-admin' %>
            </div>

            <% end %>
            <!-- Header Content -->
            <div class="content-header">
                <!-- Left Section -->
                <div class="content-header-section">
                    <!-- Open Search Section -->
                    <!-- Layout API, functionality initialized in Template._uiApiLayout() -->

                    <!-- END Open Search Section -->
                </div>
                <!-- END Left Section -->

                <!-- Right Section -->
                <div class="content-header-section">
                    <!-- User Dropdown -->
                    <% if current_user %>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-rounded btn-dual-secondary" id="page-header-user-dropdown"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-user d-sm-none"></i>
                            <span class="d-none d-sm-inline-block">
                                <%= current_user.first_name[0] %>.
                                <%= current_user.last_name %></span>
                            <i class="fa fa-angle-down ml-5"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-right min-width-200" aria-labelledby="page-header-user-dropdown">
                            <h5 class="h6 text-center py-10 mb-5 border-b text-uppercase">User</h5>
                            <%= link_to edit_user_registration_path, class: 'dropdown-item' do %>
                            <i class="si si-user mr-5"></i> Account
                            <% end %>
                            <div class="dropdown-divider"></div>
                            <%= link_to destroy_user_session_path, method: :delete, class: 'dropdown-item' do %>
                            <i class="si si-logout mr-5"></i> Sign Out
                            <% end %>
                        </div>
                    </div>
                    <% else %>
                    <div class="btn-group" role="group">
                        <%= link_to new_user_session_path do %>
                        <button type="button" class="btn btn-rounded btn-dual-secondary">
                            <span class="d-none d-sm-inline-block">Sign In</span>
                        </button>
                        <% end %>
                        <%= link_to new_user_registration_path do %>
                        <button type="button" class="btn btn-rounded btn-dual-secondary">
                            <span class="d-none d-sm-inline-block">Sign Up</span>
                        </button>
                        <% end %>
                    </div>
                    <% end %>
                    <!-- END User Dropdown -->
                </div>
                <!-- END Right Section -->
            </div>
            <!-- END Header Content -->

            <!-- Header Search -->
            <div id="page-header-search" class="overlay-header">
                <div class="content-header content-header-fullrow">
                    <form action="be_pages_generic_search.html" method="post">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <!-- Close Search Section -->
                                <!-- Layout API, functionality initialized in Template._uiApiLayout() -->
                                <button type="button" class="btn btn-secondary" data-toggle="layout" data-action="header_search_off">
                                    <i class="fa fa-times"></i>
                                </button>
                                <!-- END Close Search Section -->
                            </div>
                            <input type="text" class="form-control" placeholder="Search or hit ESC.." id="page-header-search-input"
                                name="page-header-search-input">
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-secondary">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- END Header Search -->

            <!-- Header Loader -->
            <!-- Please check out the Activity page under Elements category to see examples of showing/hiding it -->
            <div id="page-header-loader" class="overlay-header bg-primary">
                <div class="content-header content-header-fullrow text-center">
                    <div class="content-header-item">
                        <i class="fa fa-sun-o fa-spin text-white"></i>
                    </div>
                </div>
            </div>
            <!-- END Header Loader -->
        </header>
        <!-- END Header -->

        <!-- Main Container -->
        <main id="main-container">

            <!-- Hero -->
            <div class="bg-image bg-image-bottom" style="background-image: url('https://i.ibb.co/s1Zfw3t/photo34-2x.jpg')">
                <div class="bg-primary-dark-op">
                    <div class="content content-top text-center overflow-hidden">
                        <div class="pt-50 pb-20">
                            <h1 class="font-w700 text-white mb-10 invisible" data-toggle="appear" data-class="animated fadeInUp">Dashboard</h1>
                            <% if current_user.admin? %>
                            <h2 class="h4 font-w400 text-white-op invisible" data-toggle="appear" data-class="animated fadeInUp">Welcome
                                back, admin!</h2>
                            <% else %>
                            <h2 class="h4 font-w400 text-white-op invisible" data-toggle="appear" data-class="animated fadeInUp">Welcome
                                to your custom panel!</h2>
                            <% end %>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END Hero -->


            <!-- Page Content -->
            <div class="content">
                <%= render 'layouts/messages' %>
                <% if current_user.admin? %>
                <div class="row js-appear-enabled animated fadeIn" data-toggle="appear">
                    <!-- Row #1 -->
                    <div class="col-6 col-md-4 col-xl-2">
                        <%= link_to users_path, class: 'block text-center' do %>
                        <div class="block-content ribbon ribbon-bookmark ribbon-crystal ribbon-left bg-gd-dusk">
                            <div class="ribbon-box">
                                <%= User.where.not(admin: true).count %>
                            </div>
                            <p class="mt-5">
                                <i class="si si-users fa-3x text-white-op"></i>
                            </p>
                            <p class="font-w600 text-white">Drivers</p>
                        </div>

                        <% end %>
                    </div>
                    <div onclick="$('.browse-csv').click();" class="col-6 col-md-4 col-xl-2">
                        <a href="#" class="block text-center">
                            <div class="block-content bg-gd-primary">
                                <p class="mt-5">
                                    <i class="si si-plus fa-3x text-white-op"></i>
                                </p>
                                <p class="font-w600 text-white">New CSV</p>
                            </div>
                        </a>
                    </div>
                                                <%= form_for PaymentSheet.new do |f| %>
                                <%= f.file_field :sheet, class: 'browse-csv', id: 'browse-csv' %>
                                <%= f.submit "Submit", class: 'browse-csv-submit' %>
                            <% end %>
                    <!-- END Row #1 -->
                </div>
                <% else %>
                <div class="row js-appear-enabled animated fadeIn" data-toggle="appear">
                    <!-- Row #3 -->
                    <div class="col-md-6">
                        <a class="block" href="javascript:void(0)">
                            <div class="block-content block-content-full">
                                <i class="si si-diamond fa-2x text-body-bg-dark"></i>
                                <div class="row pt-10 pb-30 text-center">
                                    <div class="col-6 border-r">
                                        <div class="font-size-h3 font-w600">
                                            <%= @stat.days_worked %>
                                        </div>
                                        <div class="font-size-sm font-w600 text-uppercase text-muted">Days Worked</div>
                                    </div>
                                    <div class="col-6">
                                        <div class="font-size-h3 font-w600">
                                            <%= @stat.deliveries %>
                                        </div>
                                        <div class="font-size-sm font-w600 text-uppercase text-muted">Deliveries</div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a class="block" href="javascript:void(0)">
                            <div class="block-content block-content-full">
                                <div class="text-right">
                                    <i class="si si-wallet fa-2x text-body-bg-dark"></i>
                                </div>
                                <div class="row pt-10 pb-30 text-center">
                                    <div class="col-6 border-r">
                                        <div class="font-size-h3 font-w600">$
                                            <%= @balance_available/100 %>
                                        </div>
                                        <div class="font-size-sm font-w600 text-uppercase text-muted">Balance</div>
                                    </div>
                                    <div class="col-6">
                                        <div class="font-size-h3 font-w600">$
                                            <%= @balance_pending/100 %>
                                        </div>
                                        <div class="font-size-sm font-w600 text-uppercase text-muted">Pending</div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!-- END Row #3 -->
                </div>
                <% end %>

                <%= render 'charges' %>
                <% if @balance_available > 0 && !current_user.admin? %>
                <div class="row js-appear-enabled animated fadeIn" data-toggle="appear">
                    <!-- Row #3 -->
                    <div class="col-md-6">
                        <div class="block">
                            <div class="block-content block-content-full">


                                <div class="topspace text-center">
                                    <h3>Want your funds immediately?</h3>
                                    <p>
                                        For an extra 3% fee, we'll create an instant transfer to your debit card.
                                    </p>
                                    <% if @debit_card %>
                                        <button data-target='#debit-fadein' class="trigger-debit btn btn-alt-secondary" data-toggle='modal'>Get this transfer instantly</button>
                                    <% else %>
                                        <%= link_to "Add a debit card", debit_cards_new_path, class: "btn btn-alt-secondary" %>
                                    <% end %>
                                </div>
                                <div class="strike">
                                    <span>or</span>
                                </div>
                                <div class="topspace text-center">
                                    <% if @bank_account %>
                                        <button data-target='#bank-fadein' class="trigger-bank btn btn-alt-primary" data-toggle='modal'>Get this transfer in 2-5 days</button>
                                    <% else %>
                                        <%= link_to "Add a bank account", new_bank_account_path, class: "btn btn-alt-primary" %>
                                    <% end %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <% end %>
                <!-- END Page Content -->

                <% if @debit_card %>
                    <!-- Fade In Modal -->
                    <div class="modal fade" id="debit-fadein" tabindex="-1" role="dialog" aria-labelledby="modal-fadein"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="block block-themed block-transparent mb-0">
                                    <div class="block-header bg-primary-dark">
                                        <h3 class="block-title">Confirm</h3>
                                        <div class="block-options">
                                            <button type="button" class="btn-block-option" data-dismiss="modal" aria-label="Close">
                                                <i class="si si-close"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="block-content">
                                        <p class="debit-msg"></p>
                                        <script>
                                            $('.trigger-debit').click(function(){
                                                $('.debit-msg').text($('.confirm-debit').data('msg'));
                                            });
                                        </script>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-alt-secondary" data-dismiss="modal">Close</button>
                                    <%= button_to instant_transfer_path, method: :post, data: { msg: "Instant payout of #{format_amount(@standard_amt)} to your #{@debit_card.brand} card ending in #{@debit_card.last4}?", disable_with: "<i class='fa fa-spinner fa-spin'></i> Transferring funds..." }, params: { amount: @instant_amt.round, fee: @instant_fee.round, destination: @debit_card.id, method: 'instant' }, class: "confirm-debit btn btn-alt-success" do %>
                                        <i class="fa fa-check"></i> Perfect
                                    <% end %>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END Fade In Modal -->
                <% end %>

                <% if @bank_account %>
                    <!-- Fade In Modal -->
                    <div class="modal fade" id="bank-fadein" tabindex="-1" role="dialog" aria-labelledby="modal-fadein"
                        aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="block block-themed block-transparent mb-0">
                                    <div class="block-header bg-primary-dark">
                                        <h3 class="block-title">Confirm</h3>
                                        <div class="block-options">
                                            <button type="button" class="btn-block-option" data-dismiss="modal" aria-label="Close">
                                                <i class="si si-close"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="block-content">
                                        <p class="bank-msg"></p>
                                        <script>
                                            $('.trigger-bank').click(function(){
                                                $('.bank-msg').text($('.confirm-bank').data('msg'));
                                            });
                                        </script>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-alt-secondary" data-dismiss="modal">Close</button>
                                    <%= button_to instant_transfer_path, method: :post, data: { msg: "Standard payout of #{format_amount(@standard_amt)} to your #{@bank_account.bank_name} bank account ending in #{@bank_account.last4}?", disable_with: "<i class='fa fa-spinner fa-spin'></i> Transferring funds..." }, params: { amount: @instant_amt.round, fee: @instant_fee.round, destination: @debit_card.id, method: 'instant' }, class: "confirm-bank btn btn-alt-success" do %>
                                        <i class="fa fa-check"></i> Perfect
                                    <% end %>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END Fade In Modal -->
                <% end %>
        </main>
        <!-- END Main Container -->

        <!-- Footer -->
        <footer id="page-footer" class="opacity-0">
            <div class="content py-20 font-size-xs clearfix">
                <div class="float-right">
                    Texas ToGo Driver Portal
                </div>
                <div class="float-left">
                    &copy; 2015-2018 Texas ToGo. All Rights Reserved
                </div>
            </div>
        </footer>
        <!-- END Footer -->
    </div>
    <!-- END Page Container -->

    <!--
            Codebase JS Core

            Vital libraries and plugins used in all pages. You can choose to not include this file if you would like
            to handle those dependencies through webpack. Please check out assets/_es6/main/bootstrap.js for more info.

            If you like, you could also include them separately directly from the assets/js/core folder in the following
            order. That can come in handy if you would like to include a few of them (eg jQuery) from a CDN.

            assets/js/core/jquery.min.js
            assets/js/core/bootstrap.bundle.min.js
            assets/js/core/simplebar.min.js
            assets/js/core/jquery-scrollLock.min.js
            assets/js/core/jquery.appear.min.js
            assets/js/core/jquery.countTo.min.js
            assets/js/core/js.cookie.min.js
        -->
    <%= javascript_include_tag "codebase.core.min.js" %>

    <!--
            Codebase JS

            Custom functionality including Blocks/Layout API as well as other vital and optional helpers
            webpack is putting everything together at assets/_es6/main/app.js
        -->
    <%= javascript_include_tag "codebase.app.min.js" %>

    <!-- Page JS Plugins -->
    <%= javascript_include_tag "Chart.bundle.min.js" %>

    <!-- Page JS Code -->
    <%= javascript_include_tag "be_pages_dashboard.min.js" %>

</body>

</html>